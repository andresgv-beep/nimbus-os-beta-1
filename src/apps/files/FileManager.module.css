.layout { display: flex; height: 100%; }

/* ─── Sidebar ─── */
.sidebar {
  width: var(--sidebar-width); background: var(--bg-sidebar); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
  border-right: 1px solid var(--border); padding: calc(var(--window-header-height) + var(--space-3)) 0 var(--space-3) 0; margin-top: calc(-1 * var(--window-header-height));
  overflow-y: auto; flex-shrink: 0;
}
.sectionLabel {
  font-size: var(--text-xs); font-weight: var(--weight-medium); color: var(--text-muted);
  text-transform: uppercase; letter-spacing: 0.5px;
  padding: var(--space-3) var(--space-4) var(--space-1);
}
.sidebarItem {
  display: flex; align-items: center; gap: var(--space-2);
  padding: var(--space-2) var(--space-4); font-size: var(--text-base);
  color: var(--text-secondary); cursor: pointer; transition: var(--transition);
}
.sidebarItem:hover { background: var(--bg-hover); color: var(--text-primary); }
.sidebarItem.active { color: var(--accent); background: var(--bg-active); }
.sidebarIcon { display: flex; align-items: center; justify-content: center; width: 20px; flex-shrink: 0; }

/* ─── Main ─── */
.main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }

/* ─── Toolbar row 1 ─── */
.toolbar {
  display: flex; align-items: center; gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  border-bottom: 1px solid var(--border); flex-shrink: 0;
}
.toolBtn {
  display: flex; align-items: center; gap: var(--space-1);
  height: 30px; padding: 0 var(--space-2); font-size: var(--text-sm);
  color: var(--text-secondary); background: var(--bg-card);
  border: 1px solid var(--border); border-radius: var(--radius-sm);
  cursor: pointer; transition: var(--transition);
}
.toolBtn:hover { background: var(--bg-hover); border-color: var(--border-light); color: var(--text-primary); }

.pathBar {
  flex: 1; display: flex; align-items: center;
  background: var(--bg-input); border: 1px solid var(--border);
  border-radius: var(--radius-sm); padding: 0 var(--space-3);
  height: 30px; font-size: var(--text-sm);
}
.pathSeg { color: var(--text-muted); }
.pathCurrent { color: var(--accent); font-weight: var(--weight-medium); }

.searchBox {
  display: flex; align-items: center; gap: var(--space-1);
  background: var(--bg-input); border: 1px solid var(--border);
  border-radius: var(--radius-sm); padding: 0 var(--space-2);
  height: 30px; width: 180px; color: var(--text-muted);
  transition: var(--transition);
}
.searchBox:focus-within { border-color: var(--accent); }
.searchInput {
  border: none; background: none; outline: none;
  font-size: var(--text-sm); color: var(--text-primary);
  width: 100%; font-family: var(--font-sans);
}
.searchInput::placeholder { color: var(--text-muted); }

/* ─── Toolbar row 2 ─── */
.toolbar2 {
  display: flex; align-items: center; justify-content: space-between;
  padding: var(--space-1) var(--space-3);
  border-bottom: 1px solid var(--border); flex-shrink: 0;
}
.actionGroup { display: flex; gap: var(--space-1); }
.actionBtn {
  display: flex; align-items: center; gap: 4px;
  height: 28px; padding: 0 var(--space-3); font-size: var(--text-xs);
  color: var(--text-secondary); background: none;
  border: 1px solid var(--border); border-radius: var(--radius-sm);
  cursor: pointer; transition: var(--transition);
  font-family: var(--font-sans); font-weight: var(--weight-medium);
}
.actionBtn:hover { background: var(--bg-hover); color: var(--text-primary); }
.actionBtn:disabled { opacity: 0.4; cursor: default; }
.actionBtn:hover { filter: brightness(1.1); }
.actionBtn:nth-child(n+3) {
  background: var(--bg-card); color: var(--text-secondary);
  border: 1px solid var(--border);
}
.actionBtn:nth-child(n+3):hover { background: var(--bg-hover); color: var(--text-primary); }

.viewGroup { display: flex; gap: var(--space-1); }
.viewBtn {
  height: 28px; padding: 0 var(--space-2); font-size: var(--text-sm);
  color: var(--text-muted); background: var(--bg-card);
  border: 1px solid var(--border); border-radius: var(--radius-sm);
  cursor: pointer; transition: var(--transition); font-family: var(--font-sans);
}
.viewBtn:hover { background: var(--bg-hover); color: var(--text-primary); }

/* ─── Grid view ─── */
.grid {
  flex: 1; padding: var(--space-4) var(--space-4);
  display: grid; gap: var(--space-2); align-content: start; overflow-y: auto;
}
.fileItem {
  display: flex; flex-direction: column; align-items: center;
  gap: var(--space-2); padding: var(--space-3) var(--space-2);
  border-radius: var(--radius); cursor: pointer;
  transition: var(--transition); border: 1px solid transparent;
}
.fileItem:hover { background: var(--bg-hover); }
.fileItem.selected { background: var(--bg-active); border-color: var(--accent); }
.fileIcon {
  min-height: 32px; display: flex; align-items: center;
  justify-content: center; transition: var(--transition-spring);
}
.fileItem:hover .fileIcon { transform: translateY(-2px) scale(1.04); }
.fileName {
  font-size: var(--text-xs); text-align: center; color: var(--text-secondary);
  line-height: 1.3; max-width: 100%; overflow: hidden;
  text-overflow: ellipsis; white-space: nowrap;
}

/* ─── List view ─── */
.listWrap { flex: 1; overflow-y: auto; }
.listHeader {
  display: flex; position: sticky; top: 0; z-index: 2;
  background: var(--bg-sidebar); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-bottom: 1px solid var(--border);
  font-size: var(--text-xs); font-weight: var(--weight-medium);
  color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.3px;
}
.listHeader span { cursor: pointer; user-select: none; }
.listHeader span:hover { color: var(--text-primary); }
.listColName {
  flex: 3; display: flex; align-items: center; gap: var(--space-2);
  padding: var(--space-2) var(--space-3); min-width: 0;
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.listCol {
  flex: 1; padding: var(--space-2) var(--space-3);
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.listRow {
  display: flex; align-items: center; font-size: var(--text-sm);
  color: var(--text-secondary); border-bottom: 1px solid var(--border);
  cursor: pointer; transition: var(--transition);
}
.listRow:hover { background: var(--bg-hover); }
.listSelected { background: var(--bg-active); color: var(--text-primary); }
.listRow .listColName { font-weight: var(--weight-medium); color: var(--text-primary); }

/* ─── Statusbar ─── */
.statusbar {
  height: 32px; border-top: 1px solid var(--border);
  display: flex; align-items: center; gap: var(--space-6);
  padding: 0 var(--space-4); font-size: var(--text-xs);
  color: var(--text-muted); flex-shrink: 0;
}

.pathSep { color: var(--text-muted); margin: 0 2px; }
.fileMeta { font-size: var(--text-xs); color: var(--text-muted); margin-top: 2px; }

/* ─── New Folder Modal ─── */
.newFolderOverlay {
  position: fixed; inset: 0; z-index: 9000;
  background: rgba(0, 0, 0, 0.7);
  display: flex; align-items: center; justify-content: center;
  backdrop-filter: blur(4px);
}
.newFolderModal {
  background: var(--bg-window); border: 1px solid var(--border-light);
  border-radius: var(--radius-lg); padding: var(--space-5);
  width: 340px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(255,255,255,0.05);
}
.newFolderTitle {
  font-size: var(--text-md); font-weight: var(--weight-medium);
  margin-bottom: var(--space-3);
}
.newFolderInput {
  width: 100%; height: 36px; padding: 0 var(--space-3);
  font-size: var(--text-sm); color: var(--text-primary);
  background: var(--bg-sidebar); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid var(--border);
  border-radius: var(--radius-sm); outline: none; box-sizing: border-box;
  font-family: var(--font-sans);
}
.newFolderInput:focus { border-color: var(--accent); }
.newFolderActions {
  display: flex; justify-content: flex-end; gap: var(--space-2);
  margin-top: var(--space-4);
}
.nfCancel {
  height: 32px; padding: 0 var(--space-3); font-size: var(--text-sm);
  color: var(--text-secondary); background: var(--bg-sidebar); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--border); border-radius: var(--radius-sm);
  cursor: pointer; font-family: var(--font-sans);
}
.nfCancel:hover { background: var(--bg-hover); }
.nfCreate {
  height: 32px; padding: 0 var(--space-4); font-size: var(--text-sm);
  font-weight: var(--weight-medium); color: white; background: var(--accent);
  border: none; border-radius: var(--radius-sm);
  cursor: pointer; font-family: var(--font-sans);
}
.nfCreate:hover { filter: brightness(1.1); }

.propsGrid {
  display: grid; grid-template-columns: 90px 1fr; gap: 8px 12px;
  margin: var(--space-3) 0;
}
.propsLabel {
  font-size: var(--text-xs); color: var(--text-muted);
  font-weight: var(--weight-medium);
}
.propsValue {
  font-size: var(--text-sm); color: var(--text-primary);
  word-break: break-all;
}

/* ═══════════════════════════════════
   File Preview Viewer
   ═══════════════════════════════════ */
.previewOverlay {
  position: fixed; inset: 0; z-index: 9500;
  background: rgba(0, 0, 0, 0.85);
  display: flex; align-items: center; justify-content: center;
  backdrop-filter: blur(8px);
}
.previewContainer {
  display: flex; flex-direction: column;
  background: var(--bg-window);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: 0 24px 80px rgba(0, 0, 0, 0.6);
  max-width: 90vw; max-height: 90vh;
}

/* Type-specific sizing */
.preview_image {
  max-width: 80vw; max-height: 85vh;
}
.preview_video {
  width: 70vw; max-height: 80vh;
}
.preview_audio {
  width: 400px;
}
.preview_pdf {
  width: 70vw; height: 85vh;
}
.preview_text {
  width: 70vw; height: 80vh;
}
.previewHeader {
  display: flex; align-items: center; justify-content: space-between;
  padding: var(--space-3) var(--space-4);
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.previewTitle {
  font-size: var(--text-sm); font-weight: var(--weight-medium);
  color: var(--text-primary);
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.previewActions { display: flex; align-items: center; gap: var(--space-2); }
.previewBtn {
  height: 28px; padding: 0 var(--space-3); font-size: var(--text-xs);
  color: var(--text-secondary); background: none;
  border: 1px solid var(--border); border-radius: var(--radius-sm);
  cursor: pointer; text-decoration: none;
  display: flex; align-items: center;
  font-family: var(--font-sans);
}
.previewBtn:hover { background: var(--bg-hover); color: var(--text-primary); }
.previewClose {
  width: 28px; height: 28px; font-size: 16px;
  color: var(--text-muted); background: none;
  border: 1px solid var(--border); border-radius: var(--radius-sm);
  cursor: pointer; display: flex; align-items: center; justify-content: center;
}
.previewClose:hover { background: rgba(239, 83, 80, 0.15); color: var(--accent-red); border-color: var(--accent-red); }

.previewBody {
  flex: 1; overflow: auto;
  display: flex; align-items: center; justify-content: center;
  background: #1a1717;
  min-height: 0;
}

/* Image */
.previewImage {
  max-width: 100%; max-height: 75vh;
  object-fit: contain;
  display: block;
}

/* Video */
.previewVideo {
  max-width: 100%; max-height: 100%;
  outline: none;
}

/* Audio */
.previewAudio {
  text-align: center; padding: var(--space-6);
}
.audioIcon {
  font-size: 64px; color: var(--accent);
  margin-bottom: var(--space-3);
}
.audioName {
  font-size: var(--text-md); color: var(--text-primary);
  margin-bottom: var(--space-2);
}

/* PDF */
.previewPdf {
  width: 100%; height: 100%;
  border: none;
}

/* Text / Code */
.previewText {
  width: 100%; height: 100%;
  margin: 0; padding: var(--space-4);
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  color: var(--text-primary);
  background: var(--bg-sidebar); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
  overflow: auto;
  line-height: 1.6;
  white-space: pre;
  tab-size: 4;
}
.previewTextLoading {
  color: var(--text-muted); font-size: var(--text-sm);
}
