.layout { display: flex; height: 100%; }

/* ─── Sidebar ─── */
.sidebar {
  width: var(--sidebar-width); background: var(--bg-sidebar); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
  border-right: 1px solid var(--border); padding: calc(var(--window-header-height) + var(--space-3)) 0 var(--space-3) 0; margin-top: calc(-1 * var(--window-header-height));
  overflow-y: auto; flex-shrink: 0;
}
.sectionLabel {
  font-size: var(--text-xs); font-weight: var(--weight-medium); color: var(--text-muted);
  text-transform: uppercase; letter-spacing: 0.5px;
  padding: var(--space-3) var(--space-4) var(--space-1);
}
.sidebarItem {
  display: flex; align-items: center; gap: var(--space-2);
  padding: var(--space-2) var(--space-4); font-size: var(--text-base);
  color: var(--text-secondary); cursor: pointer; transition: var(--transition);
}
.sidebarItem:hover { background: var(--bg-hover); color: var(--text-primary); }
.sidebarItem.active { color: var(--accent); background: var(--bg-active); }
.sidebarIcon { display: flex; align-items: center; width: 20px; flex-shrink: 0; }

/* ─── Main ─── */
.main { flex: 1; padding: var(--space-5); overflow-y: auto; }
.main > * { max-width: 820px; }
.title { font-size: var(--text-lg); font-weight: var(--weight-medium); margin-bottom: 0; }
.pageHeader { display: flex; align-items: center; justify-content: space-between; margin-bottom: var(--space-4); }

/* ─── Buttons ─── */
.btnPrimary {
  height: 32px; padding: 0 var(--space-4); font-size: var(--text-sm);
  font-weight: var(--weight-medium); color: white; background: var(--accent);
  border: none; border-radius: var(--radius-sm); cursor: pointer;
  font-family: var(--font-sans); transition: var(--transition);
}
.btnPrimary:hover { filter: brightness(1.1); }
.btnSecondary {
  height: 32px; padding: 0 var(--space-3); font-size: var(--text-sm);
  color: var(--text-secondary); background: var(--bg-card);
  border: 1px solid var(--border); border-radius: var(--radius-sm);
  cursor: pointer; font-family: var(--font-sans); transition: var(--transition);
}
.btnSecondary:hover { background: var(--bg-hover); color: var(--text-primary); }
.btnSmall {
  height: 26px; padding: 0 var(--space-2); font-size: var(--text-xs);
  color: var(--text-muted); background: var(--bg-card);
  border: 1px solid var(--border); border-radius: var(--radius-sm);
  cursor: pointer; font-family: var(--font-sans);
}
.btnSmall:hover { background: var(--bg-hover); color: var(--text-primary); }
.btnDanger:hover { filter: brightness(1.1); }

/* ─── Table ─── */
.tableCard { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden; }
.table { width: 100%; border-collapse: collapse; font-size: var(--text-sm); }
.table th {
  text-align: left; padding: var(--space-3) var(--space-4);
  font-size: var(--text-xs); font-weight: var(--weight-medium);
  color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;
  border-bottom: 1px solid var(--border); background: var(--bg-sidebar); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
}
.table td { padding: var(--space-3) var(--space-4); border-bottom: 1px solid var(--border); color: var(--text-secondary); }
.table tr:last-child td { border-bottom: none; }
.table tr:hover td { background: var(--bg-hover); }
.cellName { font-weight: var(--weight-medium); color: var(--text-primary); }
.mono { font-family: var(--font-mono); font-size: var(--text-sm); }

/* ─── User cell with avatar ─── */
.userCell { display: flex; align-items: center; gap: var(--space-2); }
.avatar {
  width: 32px; height: 32px; border-radius: 50%;
  background: var(--accent); color: white;
  display: flex; align-items: center; justify-content: center;
  font-size: var(--text-sm); font-weight: var(--weight-medium); flex-shrink: 0;
}
.avatarSm {
  width: 26px; height: 26px; border-radius: 50%;
  background: var(--accent); color: white;
  display: flex; align-items: center; justify-content: center;
  font-size: var(--text-xs); font-weight: var(--weight-medium); flex-shrink: 0;
}

/* ─── Badges ─── */
.badge { font-size: var(--text-xs); padding: 2px 8px; border-radius: var(--radius-full); }
.badgeGood { background: rgba(76,175,80,0.08); color: var(--accent-green); }
.badgeWarn { background: rgba(255,167,38,0.08); color: var(--accent-amber); }
.badgeDanger { background: rgba(239,83,80,0.08); color: var(--accent-red); }
.badgeInfo { background: rgba(66,165,245,0.08); color: #42A5F5; }
.badgeStopped { background: rgba(255,255,255,0.05); color: var(--text-muted); }
.badgeCurrent { background: rgba(66,165,245,0.08); color: #42A5F5; }

.roleBadge {
  font-size: var(--text-xs); padding: 2px 8px; border-radius: var(--radius-full);
  background: rgba(255,255,255,0.05); color: var(--text-secondary);
}
.roleAdmin { background: rgba(233,84,32,0.1); color: var(--accent); }
.roleGuest { background: rgba(255,255,255,0.03); color: var(--text-muted); }

/* ─── Permission badges ─── */
.permBadge {
  font-size: var(--text-xs); padding: 2px 6px; border-radius: var(--radius-sm);
}
.permRW { background: rgba(76,175,80,0.08); color: var(--accent-green); }
.permR { background: rgba(66,165,245,0.08); color: #42A5F5; }
.permNone { background: transparent; color: var(--text-muted); }

/* ─── Config Card ─── */
.configCard {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: var(--space-4); margin-bottom: var(--space-3);
}
.configTitle {
  font-size: var(--text-sm); font-weight: var(--weight-medium); color: var(--text-primary);
  margin-bottom: var(--space-3); padding-bottom: var(--space-2); border-bottom: 1px solid var(--border);
}
.configRow {
  display: flex; justify-content: space-between; align-items: center;
  padding: var(--space-2) 0; font-size: var(--text-sm); border-bottom: 1px solid var(--border);
}
.configRow:last-child { border-bottom: none; }
.configLabel { color: var(--text-muted); }
.configValue { color: var(--text-primary); font-weight: var(--weight-medium); }
.configSub { font-size: var(--text-xs); color: var(--text-muted); }
.configSelect {
  height: 30px; padding: 0 var(--space-2); font-size: var(--text-sm);
  background: var(--bg-input); border: 1px solid var(--border);
  border-radius: var(--radius-sm); color: var(--text-primary);
  font-family: var(--font-sans); cursor: pointer;
}

/* ─── Toggle ─── */
.toggle {
  width: 44px; height: 24px; border-radius: var(--radius-full);
  background: rgba(255,255,255,0.1); cursor: pointer;
  position: relative; transition: background 0.2s ease; flex-shrink: 0;
}
.toggleOn { background: var(--accent); }
.toggleDot {
  position: absolute; top: 3px; left: 3px;
  width: 18px; height: 18px; border-radius: 50%;
  background: white; transition: transform 0.2s ease;
}
.toggleOn .toggleDot { transform: translateX(20px); }

/* ─── Update banner ─── */
.updateBanner {
  display: flex; align-items: center; gap: var(--space-4);
  padding: var(--space-4); background: var(--bg-card);
  border: 1px solid var(--border); border-radius: var(--radius);
  margin-bottom: var(--space-4);
}
.updateIcon {
  width: 42px; height: 42px; border-radius: 50%;
  background: var(--accent-green); color: white;
  display: flex; align-items: center; justify-content: center;
  font-size: var(--text-lg); font-weight: var(--weight-medium); flex-shrink: 0;
}
.updateTitle { font-size: var(--text-md); font-weight: var(--weight-medium); color: var(--text-primary); }
.updateDesc { font-size: var(--text-sm); color: var(--text-muted); margin-top: 2px; }

/* ─── Changelog ─── */
.changelogItem {
  display: flex; gap: var(--space-3); font-size: var(--text-sm); color: var(--text-secondary);
  padding: var(--space-2) 0;
}
.changelogVer { font-weight: var(--weight-medium); color: var(--accent); min-width: 60px; }
.changelogDate { color: var(--text-muted); min-width: 90px; }

/* ─── Modal ─── */
.modalOverlay {
  position: fixed; inset: 0; z-index: 9000;
  background: rgba(0, 0, 0, 0.7);
  display: flex; align-items: center; justify-content: center;
  backdrop-filter: blur(4px);
}
.modal {
  background: var(--bg-window);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
  width: 420px; max-height: 80vh; overflow-y: auto;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(255,255,255,0.05);
}
.modalTitle {
  font-size: var(--text-md); font-weight: var(--weight-medium);
  margin-bottom: var(--space-4);
}
.fieldLabel {
  display: block; font-size: var(--text-xs); color: var(--text-muted);
  margin-bottom: 4px; margin-top: var(--space-3);
}
.fieldLabel:first-of-type { margin-top: 0; }
.fieldInput {
  width: 100%; height: 34px; padding: 0 var(--space-3);
  font-size: var(--text-sm); color: var(--text-primary);
  background: var(--bg-sidebar); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid var(--border);
  border-radius: var(--radius-sm); outline: none; box-sizing: border-box;
  font-family: var(--font-sans);
}
.fieldInput:focus { border-color: var(--accent); }
.modalError {
  margin-top: var(--space-3); padding: var(--space-2);
  font-size: var(--text-sm); color: var(--accent-red);
  background: rgba(239, 83, 80, 0.1); border-radius: var(--radius-sm);
  text-align: center;
}
.modalActions {
  display: flex; justify-content: flex-end; gap: var(--space-2);
  margin-top: var(--space-4);
}
.btnDanger {
  color: var(--text-muted);
  border-color: rgba(239, 83, 80, 0.3);
}
.btnDanger:hover {
  background: rgba(239, 83, 80, 0.15);
  border-color: var(--accent-red);
  color: var(--accent-red);
}

/* ─── Modal sections ─── */
.modalSection {
  font-size: var(--text-xs); font-weight: var(--weight-semibold);
  text-transform: uppercase; letter-spacing: 0.5px;
  color: var(--text-muted); margin-top: var(--space-5);
  margin-bottom: var(--space-2); padding-top: var(--space-3);
  border-top: 1px solid var(--border);
}

.permGrid {
  display: flex; flex-direction: column; gap: 6px;
}
.permRow {
  display: flex; align-items: center; justify-content: space-between;
  padding: 4px 0;
}
.permApp {
  font-size: var(--text-sm); color: var(--text-secondary);
}
.permSelect {
  height: 26px; padding: 0 var(--space-2);
  font-size: var(--text-xs); color: var(--text-primary);
  background: var(--bg-sidebar); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid var(--border);
  border-radius: var(--radius-sm); outline: none;
}
.permSelect:focus { border-color: var(--accent); }

.permNote {
  font-size: var(--text-xs); color: var(--text-muted);
  font-style: italic; padding: var(--space-2) 0;
}

/* ═══════════════════════════════════
   App Permissions Page
   ═══════════════════════════════════ */
.pageDesc {
  font-size: var(--text-sm);
  color: var(--text-muted);
  margin-bottom: var(--space-4);
}

.subTitle {
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--text-secondary);
  margin-top: var(--space-5);
  margin-bottom: var(--space-3);
}

/* Permission Matrix */
.permMatrix {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.permMatrixCard {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
}

.permMatrixHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-3) var(--space-4);
  background: var(--bg-sidebar);
  border-bottom: 1px solid var(--border);
}

.permMatrixHeader strong {
  font-size: var(--text-sm);
  color: var(--text-primary);
}

.permMatrixPath {
  font-size: var(--text-xs);
  color: var(--text-muted);
  font-family: var(--font-mono);
  margin-left: var(--space-2);
}

.permMatrixBody {
  padding: var(--space-3) var(--space-4);
}

.permMatrixSection {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  margin-bottom: var(--space-2);
}

.permMatrixSection:last-child {
  margin-bottom: 0;
}

.permMatrixLabel {
  font-size: var(--text-xs);
  color: var(--text-muted);
  min-width: 60px;
  padding-top: 2px;
}

.permMatrixTags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.permTag {
  display: inline-block;
  padding: 2px 8px;
  font-size: var(--text-xs);
  border-radius: var(--radius-sm);
  font-weight: var(--weight-medium);
}

.permTagRW {
  background: rgba(102, 187, 106, 0.15);
  color: var(--accent-green);
}

.permTagRO {
  background: rgba(255, 167, 38, 0.15);
  color: var(--accent);
}

.permTagApp {
  background: rgba(66, 165, 245, 0.15);
  color: #42a5f5;
}

.permTagNone {
  font-size: var(--text-xs);
  color: var(--text-muted);
  font-style: italic;
}

.btnSmall {
  height: 28px;
  padding: 0 var(--space-3);
  font-size: var(--text-xs);
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition);
}

.btnSmall:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
  border-color: var(--accent);
}

/* Apps List */
.appsList {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: var(--space-3);
}

.appCard {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: var(--space-3);
}

.appCardHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-2);
}

.appCardName {
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--text-primary);
}

.appCardType {
  font-size: 10px;
  padding: 2px 6px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  text-transform: uppercase;
}

.appCardFolders {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.folderTag {
  font-size: var(--text-xs);
  padding: 2px 6px;
  background: rgba(102, 187, 106, 0.1);
  color: var(--accent-green);
  border-radius: var(--radius-sm);
}

.noFolders {
  font-size: var(--text-xs);
  color: var(--text-muted);
  font-style: italic;
}

/* Permission Edit Modal */
.permEditList {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 200px;
  overflow-y: auto;
}

.permEditRow {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 0;
}

.permEditName {
  font-size: var(--text-sm);
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.adminBadge {
  font-size: 9px;
  padding: 1px 5px;
  background: rgba(255, 167, 38, 0.2);
  color: var(--accent);
  border-radius: var(--radius-sm);
  text-transform: uppercase;
}

.appTypeBadge {
  font-size: 9px;
  padding: 1px 5px;
  background: rgba(255, 255, 255, 0.05);
  color: var(--text-muted);
  border-radius: var(--radius-sm);
}

.permEditBtns {
  display: flex;
  gap: 4px;
}

.permBtn {
  width: 32px;
  height: 26px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg-card);
  color: var(--text-muted);
  font-size: var(--text-xs);
  cursor: pointer;
  transition: var(--transition);
}

.permBtn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.permBtnActive {
  background: var(--accent);
  border-color: var(--accent);
  color: white;
}

.permBtnActive:hover {
  background: var(--accent-active);
}

.permToggle {
  padding: 4px 12px;
  font-size: var(--text-xs);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg-card);
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition);
}

.permToggle:hover {
  background: var(--bg-hover);
}

.permToggleOn {
  background: rgba(102, 187, 106, 0.15);
  border-color: rgba(102, 187, 106, 0.3);
  color: var(--accent-green);
}

.permToggleOn:hover {
  background: rgba(102, 187, 106, 0.25);
}

/* ─── Additional permission styles ─── */
.adminTag {
  font-size: var(--text-xs);
  color: var(--accent);
  font-weight: var(--weight-normal);
}

.appTypeTag {
  font-size: 9px;
  padding: 1px 5px;
  margin-left: 6px;
  background: rgba(255, 255, 255, 0.05);
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  text-transform: uppercase;
}

.permToggleBtn {
  padding: 4px 10px;
  font-size: var(--text-xs);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg-card);
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition);
  min-width: 80px;
}

.permToggleBtn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.permToggleBtnOn {
  background: rgba(102, 187, 106, 0.15);
  border-color: rgba(102, 187, 106, 0.3);
  color: var(--accent-green);
}

.permToggleBtnOn:hover {
  background: rgba(102, 187, 106, 0.25);
}

.btnSmall {
  height: 26px;
  padding: 0 var(--space-2);
  font-size: var(--text-xs);
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition);
}

.btnSmall:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}
